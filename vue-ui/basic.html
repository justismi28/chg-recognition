<!-- development version, includes helpful console warnings -->

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>CHG Recognition</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.js" integrity="sha256-NSuqgY2hCZJUN6hDMFfdxvkexI7+iLxXQbL540RQ/c4=" crossorigin="anonymous"></script>
<!--    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js" integrity="sha256-T/f7Sju1ZfNNfBh7skWn0idlCBcI3RwdLSS4/I7NQKQ=" crossorigin="anonymous"></script>-->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <style>
        .submittedBy, .nomineeId {
            font-size: xx-small;
        }
    </style>
</head>
<body>
<div id="app">
    <input v-model="message">
    {{ message }}
    <br>
    <button v-on:click="reverseTodos">Reverse todos</button>
    <button v-on:click="addTodo">Add todo item</button>
    <hr>


    <div id="nominations">
        Nominations:
        <ol>
            <nomination-container
                    v-for="n in nominations"
                    v-bind:nomination="n"
                    v-bind:key="n._id"
            ></nomination-container>
        </ol>
    </div>
</div>
</body>
<script type="application/javascript">

    Vue.component('todo-item', {
        props: ['todo'],
        template: '<li>{{ todo.text }}</li>'
    })

    Vue.component('nomination-container', {
        props: ['nomination'],
        template: '' +
            '<li class="nomination">' +
            '   <div class="core-value">{{ nomination.coreValue }}</div>' +
            '   <div class="message">{{ nomination.message }}</div>' +
            '   <div class="points">{{ nomination.points }}</div>' +
            '   <div class="submittedBy">{{ nomination.nominatorId }}</div>' +
            '   <div class="nomineeId">{{ nomination.nomineeId }}</div>' +
            '</li>'
    })

    var app = new Vue({
        el: '#app',
        data: {
            message: 'New Todo item text',
            seen: true,
            showTodos: false,

            nominations: [
                {"_id": "5e72a2176eb55d5560830859", "nominatorId": "5e729a3c6ea33327d2851b4f", "nomineeId": "5e729a3c6ea33327d2851b50", "points": 50, "coreValue": "Putting People First", "message": "Great job!", "date": "2020-03-18T15:25:24.337Z"},
                {"_id": "5eea7eef5629ff0012a2f4d4", "nominatorId": "5e729a3c6ea33327d2851b50", "nomineeId": "5e729a3c6ea33327d2851b4f", "points": 1, "coreValue": "Putting People First", "message": "He's a spider ðŸ•·ï¸ and he's so awesome it blows my mind ðŸ¤¯.", "date": "2020-06-17T20:37:03.630Z"},
                {"_id": "5eea7f375629ff0012a2f4d5", "points": 1, "coreValue": "Putting People First", "nominatorId": "5e729a3c6ea33327d2851b4f", "nomineeId": "5e729a3c6ea33327d2851b50", "message": "Ryan just tried some ðŸ¤¯ emojis ðŸ¥³ðŸ¤©ðŸ˜ðŸ¥°", "date": "2020-06-17T20:38:14.790Z"}
            ],

            todos: [
                {id:1, text: 'Add VueJs basics'},
                {id:2, text: 'Add bootstrap basics'},
                {id:3, text: 'Add back-end web calls'},
                {id:4, text: 'Start with a full vue-cli project (just for kicks)'},
            ],
        },
        methods: {
            reverseTodos: function () {
                this.todos.reverse()
            },
            addTodo: function () {
                this.todos.push({text: this.message})
            }
        },
        mounted () {
            axios.get('https://chg-recognition.curtisporter.com/nominations/')
                .then(response => (this.nominations = response.data))
        }
    });
</script>
</html>